<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <title>Payment</title>
        <meta http-equiv="Content-Type" content="text/html; charset = UTF-8"  />
    </h:head>
    <h:body>
        <center>
            <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
                <input type="hidden" name="cmd" value="_cart" />
                <input type="hidden" name="upload" value="1" />
                
                <c:set var="dem" value="1" />
                <c:forEach items="#{shoppingCartMB.cart}" var="i">
                    <input type="hidden" name="item_number_#{dem}" value="#{i.p.proId}" />
                    
                    <input type="hidden" name="item_name_#{dem}" value="#{i.p.proName}" />
                    
                    <input type="hidden" name="quantity_#{dem}" value="#{i.quantity}" />
                    
                    <input type="hidden" name="amount_#{dem}" value="#{i.p.proPrice}" />
                    
                    <c:set var="dem" value="#{dem+1}" />
                </c:forEach>
                    
                // for business account setup
                
                <input type="hidden" name="business" value="business1_sam@gmail.com" />
                
                <input type="hidden" name="return" value="http://localhost:8080/Shop_Online/success.xhtml" />
                
                <input type="hidden" name="cancel" value="http://localhost:8080/Shop_Online/fail.xhtml" />
                
                <input type="image" name="submit" border="0" 
                       src="http://linklawphilly.com/wp-content/uploads/2015/04/paypal.png" 
                       alt="Paypal - The safer, easier way to pay online" />
            </form>
        </center>
    </h:body>
</html>

